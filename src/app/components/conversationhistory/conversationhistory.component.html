<!-- <p>conversationhistory works!</p> -->

<div class="background container">
    <nav class="chat-navbar">
    <div class="custom-container">
        <div class="custom-user-profile">
            <div class="custom-user-image">
                <span>{{ clickedUserName!.charAt(0).toUpperCase() }}</span>
           </div>
        </div>
        <strong style="color: white;">{{ clickedUserName }}</strong>
    </div>
</nav>

<div class="history-container">
    <!-- <div class ="scroll-container" > -->
    <div *ngFor="let message of messages" [ngClass]="{'message-left': message.senderId === clickedUserId, 'message-right': message.senderId !== clickedUserId}" (contextmenu)="onContextMenu($event, message)">
        <p>{{ message.content }}</p>
        <div *ngIf="contextMenuVisible && message.senderId !== clickedUserId && message.content == selectedMessage.content" class="context-menu">
            <button (click)="editMessage()">Edit</button>
            <button (click)="deleteMessage()">Delete</button>
        </div>
        
        <small>{{ message.timestamp | date: 'medium' }}</small>
    </div>
    <!-- </div> -->
</div>

<div *ngIf="isEditing">
    <input type="text" [(ngModel)]="editedMessageContent">
    <button (click)="acceptEditMessage()">Accept</button>
    <button (click)="declineEditMessage()">Decline</button>
</div>

<div *ngIf="isDeleting">
    <button (click)="acceptDeleteMessage()">Accept</button>
    <button (click)="declineDeleteMessage()">Decline</button>
</div>

<div class="send-chat">
    <input type="text" placeholder="Type your message..." [(ngModel)]="messageContent" />
    <button class="send-button" (click)="sendMessage()">Send</button>
  </div>

</div>