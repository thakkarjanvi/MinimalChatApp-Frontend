<div class="background container">
    <nav class="chat-navbar">
      <div class="custom-container">
        <div class="custom-user-profile">
          <div class="custom-user-image">
            <span>T</span>
          </div>
        </div>
        <strong style="color: white;">Test1</strong>
      </div>
    </nav>
  
    <div class="history-container">
      <div
        *ngFor="let message of messages; let i = index  "
        [ngClass]="{
          'message-left': message.senderId === clickedUserId,
          'message-right': message.senderId !== clickedUserId
        }"
        (contextmenu)="showContextMenu($event, message)"
        (click)="togglePopup(message)"
      >
        <p>{{ message.content }}</p>
        <small>{{ message.timestamp | date: 'medium' }}</small>
        <!-- Add Edit and Delete buttons for each message -->
        <button *ngIf="message.receiverId === clickedUserId" (click)="editMessage()">Edit</button>
        <button *ngIf="message.receiverId === clickedUserId" (click)="deleteMessage()">Delete</button>
      </div>
    </div>

    <!-- <div class="popup-container" *ngIf="editDeletePopupVisible">
        <p>Edit or delete the message:</p>
        <textarea [(ngModel)]="editedMessageContent"></textarea>
        <button class="edit-button" (click)="editMessage()">Edit</button>
        <button class="delete-button" (click)="deleteMessage()">Delete</button>
       <button class="cancel-button" (click)="cancelPopup()">Cancel</button> 
      </div> -->
  
    <div class="send-chat">
      <input type="text" placeholder="Type your message..." [(ngModel)]="messageContent" />
      <button class="send-button" (click)="sendMessage()">Send</button>
    </div>
  </div>
  
  <!-- Inline Message Editor Template -->
  <div class="message-editor" *ngIf="editMessageVisible">
    <!-- <input type="text" [(ngModel)]="editedMessageContent" /> -->
    <textarea [(ngModel)]="editedMessageContent"></textarea>
    <button (click)="acceptEdit()">Accept</button>
    <button (click)="cancelEdit()">Cancel</button>
  </div>
  
  <!-- Confirmation Dialog for Delete -->
  <div class="delete-confirmation" *ngIf="deleteConfirmationVisible">
    <p>Are you sure you want to delete this message?</p>
    <button (click)="acceptDelete()">Accept</button>
    <button (click)="cancelDelete()">Cancel</button>
  </div>
  